{"version":3,"file":"VDataTableRow.mjs","names":["VBtn","VCheckboxBtn","useExpanded","useHeaders","useSelection","VDataTableColumn","toDisplayString","withModifiers","genericComponent","getObjectValueByPath","propsFactory","useRender","makeVDataTableRowProps","index","Number","item","Object","onClick","Function","VDataTableRow","name","props","setup","_ref","slots","isSelected","toggleSelect","isExpanded","toggleExpand","columns","_createVNode","value","map","column","i","align","fixed","fixedOffset","lastFixed","key","width","default","slotName","slotProps","raw","internalItem","selectable"],"sources":["../../../src/labs/VDataTable/VDataTableRow.tsx"],"sourcesContent":["// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VCheckboxBtn } from '@/components/VCheckbox'\n\n// Composables\nimport { useExpanded } from './composables/expand'\nimport { useHeaders } from './composables/headers'\nimport { useSelection } from './composables/select'\nimport { VDataTableColumn } from './VDataTableColumn'\n\n// Utilities\nimport { toDisplayString, withModifiers } from "/js/vue.js"\nimport { genericComponent, getObjectValueByPath, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from "/js/vue.js"\nimport type { DataTableItem, ItemKeySlot } from './types'\n\nexport type VDataTableRowSlots = {\n  'item.data-table-select': Omit<ItemKeySlot, 'value'>\n  'item.data-table-expand': Omit<ItemKeySlot, 'value'>\n} & { [key: `item.${string}`]: ItemKeySlot }\n\nexport const makeVDataTableRowProps = propsFactory({\n  index: Number,\n  item: Object as PropType<DataTableItem>,\n  onClick: Function as PropType<(e: MouseEvent) => void>,\n}, 'VDataTableRow')\n\nexport const VDataTableRow = genericComponent<VDataTableRowSlots>()({\n  name: 'VDataTableRow',\n\n  props: makeVDataTableRowProps(),\n\n  setup (props, { slots }) {\n    const { isSelected, toggleSelect } = useSelection()\n    const { isExpanded, toggleExpand } = useExpanded()\n    const { columns } = useHeaders()\n\n    useRender(() => (\n      <tr\n        class={[\n          'v-data-table__tr',\n          {\n            'v-data-table__tr--clickable': !!props.onClick,\n          },\n        ]}\n        onClick={ props.onClick }\n      >\n        { props.item && columns.value.map((column, i) => (\n          <VDataTableColumn\n            align={ column.align }\n            fixed={ column.fixed }\n            fixedOffset={ column.fixedOffset }\n            lastFixed={ column.lastFixed }\n            noPadding={ column.key === 'data-table-select' || column.key === 'data-table-expand' }\n            width={ column.width }\n          >\n            {{\n              default: () => {\n                const item = props.item!\n                const slotName = `item.${column.key}` as const\n                const slotProps = {\n                  index: props.index!,\n                  item: item.raw,\n                  internalItem: item,\n                  value: getObjectValueByPath(item.columns, column.key),\n                  column,\n                  isSelected,\n                  toggleSelect,\n                  isExpanded,\n                  toggleExpand,\n                } satisfies ItemKeySlot\n\n                if (slots[slotName]) return slots[slotName]!(slotProps)\n\n                if (column.key === 'data-table-select') {\n                  return slots['item.data-table-select']?.(slotProps) ?? (\n                    <VCheckboxBtn\n                      disabled={ !item.selectable }\n                      modelValue={ isSelected([item]) }\n                      onClick={ withModifiers(() => toggleSelect(item), ['stop']) }\n                    />\n                  )\n                }\n\n                if (column.key === 'data-table-expand') {\n                  return slots['item.data-table-expand']?.(slotProps) ?? (\n                    <VBtn\n                      icon={ isExpanded(item) ? '$collapse' : '$expand' }\n                      size=\"small\"\n                      variant=\"text\"\n                      onClick={ withModifiers(() => toggleExpand(item), ['stop']) }\n                    />\n                  )\n                }\n\n                return toDisplayString(slotProps.value)\n              },\n            }}\n          </VDataTableColumn>\n        ))}\n      </tr>\n    ))\n  },\n})\n\nexport type VDataTableRow = InstanceType<typeof VDataTableRow>\n"],"mappings":"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"}